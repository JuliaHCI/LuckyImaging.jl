<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API/Reference · LuckyImaging.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">LuckyImaging.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>API/Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API/Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API/Reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaHCI/LuckyImaging.jl/blob/master/docs/src/api.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API/Reference"><a class="docs-heading-anchor" href="#API/Reference">API/Reference</a><a id="API/Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API/Reference" title="Permalink"></a></h1><ul><li><a href="#LuckyImaging.classic_lucky_image-Union{Tuple{AbstractArray{T}}, Tuple{T}} where T"><code>LuckyImaging.classic_lucky_image</code></a></li><li><a href="#LuckyImaging.classic_lucky_image!-Union{Tuple{T}, Tuple{AbstractMatrix, AbstractArray{T, 3}}} where T"><code>LuckyImaging.classic_lucky_image!</code></a></li><li><a href="#LuckyImaging.fourier_lucky_image-Union{Tuple{AbstractArray{T, 3}}, Tuple{T}} where T"><code>LuckyImaging.fourier_lucky_image</code></a></li><li><a href="#LuckyImaging.fourier_lucky_image!-Union{Tuple{T}, Tuple{AbstractMatrix, AbstractArray{T, 3}}} where T"><code>LuckyImaging.fourier_lucky_image!</code></a></li><li><a href="#LuckyImaging.lucky_image-Union{Tuple{AbstractArray{T, 3}}, Tuple{T}} where T"><code>LuckyImaging.lucky_image</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="LuckyImaging.classic_lucky_image!-Union{Tuple{T}, Tuple{AbstractMatrix, AbstractArray{T, 3}}} where T" href="#LuckyImaging.classic_lucky_image!-Union{Tuple{T}, Tuple{AbstractMatrix, AbstractArray{T, 3}}} where T"><code>LuckyImaging.classic_lucky_image!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">classic_lucky_image!(out::AbstractMatrix, cube; dims, q, kwargs...)</code></pre><p>Perform classic lucky imaging and store the combined frame in <code>out</code>. See <a href="#LuckyImaging.classic_lucky_image-Union{Tuple{AbstractArray{T}}, Tuple{T}} where T"><code>classic_lucky_image</code></a> for a full description.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaHCI/LuckyImaging.jl/blob/2f2393f3325450b60249f473ab80cc8e4f9ddab2/src/classic.jl#L49-L53">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LuckyImaging.classic_lucky_image-Union{Tuple{AbstractArray{T}}, Tuple{T}} where T" href="#LuckyImaging.classic_lucky_image-Union{Tuple{AbstractArray{T}}, Tuple{T}} where T"><code>LuckyImaging.classic_lucky_image</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">classic_lucky_image(cube; dims, q, metric=:peak, register=:dft, kwargs...)</code></pre><p>Perform classic lucky imaging for a cube of data along dimension <code>dims</code>. The selection fraction is set by the quantile <code>q</code>, where <code>q=0.9</code> corresponds to a 10% selectrion fraction. The following options are available for modifying the metric used for selection as well as how the frames are registered.</p><p><strong>Metrics</strong></p><p>The following metrics, set with the keyword argument <code>metric</code> are available</p><ul><li><code>:peak</code> - the maximum value</li><li><code>:mean</code> - the mean value</li><li>other - pass a function with the signature <code>f(::AbstractMatrix)</code> which returns a single value</li></ul><p><strong>Registration</strong></p><p>The following options for registering the selected frames are available, set with the <code>register</code>keyword argument. Extra options can be provided to <code>kwargs...</code></p><ul><li><code>:dft</code> - use <code>SubpixelRegistration.jl</code> to register the frames using their phase offsets. The reference frame will be the one with the highest metric, and keyword arguments like <code>upsample_factor</code> can be passed directly.</li><li><code>:peak</code> - register to maximum value</li><li><code>:com</code> - register to center of mass</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>dims</code> - the dimension along which to perform lucky imaging (required)</li><li><code>q</code> - the selection quantile (required)</li><li><code>metric</code> - the metric used for selection. Default is <code>:peak</code></li><li><code>register</code> - the method used for registration. Default is <code>:dft</code></li><li><code>window</code> - if provided, will measure the metric and frame offsets inside a centered window with <code>window</code> side length.</li><li><code>kwargs...</code> - additional keyword arguments will be passed to the <code>register</code> method (e.g., <code>upsample_factor</code>)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; cube = # load data ...

julia&gt; res = classic_lucky_image(cube; dims=3, q=0.9, upsample_factor=10)</code></pre><p><strong>See Also</strong></p><p><a href="#LuckyImaging.classic_lucky_image!-Union{Tuple{T}, Tuple{AbstractMatrix, AbstractArray{T, 3}}} where T"><code>classic_lucky_image!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaHCI/LuckyImaging.jl/blob/2f2393f3325450b60249f473ab80cc8e4f9ddab2/src/classic.jl#L2-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LuckyImaging.fourier_lucky_image!-Union{Tuple{T}, Tuple{AbstractMatrix, AbstractArray{T, 3}}} where T" href="#LuckyImaging.fourier_lucky_image!-Union{Tuple{T}, Tuple{AbstractMatrix, AbstractArray{T, 3}}} where T"><code>LuckyImaging.fourier_lucky_image!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">fourier_lucky_image!(out::AbstractMatrix, cube; dims, q, kwargs...)</code></pre><p>Perform Fourier lucky imaging and store the combined frame in <code>out</code>. See <a href="#LuckyImaging.fourier_lucky_image-Union{Tuple{AbstractArray{T, 3}}, Tuple{T}} where T"><code>fourier_lucky_image</code></a> for a full descripton.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaHCI/LuckyImaging.jl/blob/2f2393f3325450b60249f473ab80cc8e4f9ddab2/src/fourier.jl#L47-L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LuckyImaging.fourier_lucky_image-Union{Tuple{AbstractArray{T, 3}}, Tuple{T}} where T" href="#LuckyImaging.fourier_lucky_image-Union{Tuple{AbstractArray{T, 3}}, Tuple{T}} where T"><code>LuckyImaging.fourier_lucky_image</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">fourier_lucky_image(cube; dims, q, register=:dft, kwargs...)</code></pre><p>Perform Fourier lucky imaging following the algorithm in Garrel, Guyon, and Baudoz (2012).<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup> This technique provides superior sharpness compared to classic lucky imaging <em>for the same selection percentage</em>. This means for a desired angular resolution (or Strehl ratio) a higher signal-to-noise ratio can be achieved.</p><p><strong>Registration</strong></p><p>Before processing the Fourier transform of the cube, the frames need coregistered to avoid phase ramps in the Fourier transform modulus. The following algorithms are available for registering the cube, set with the <code>register</code> keyword argument. Extra options can be provided to <code>kwargs...</code></p><ul><li><code>:dft</code> - use <code>SubpixelRegistration.jl</code> to register the frames using their phase offsets. The reference frame will be the one with the highest metric, and keyword arguments like <code>upsample_factor</code> and <code>refidx</code> can be passed directly. By default the <code>refidx</code> will be set to the frame with the highest peak flux.</li><li><code>:peak</code> - register to maximum value</li><li><code>:com</code> - register to center of mass</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>dims</code> - the dimension along which to perform lucky imaging (required)</li><li><code>q</code> - the selection quantile (required)</li><li><code>register</code> - the method used for registration. Default is <code>:dft</code></li><li><code>maxfreq</code> - if provided, will exclude frequencies higher than <code>maxfreq * maximum(fftfreqs)</code>. In other words, a value of 1 uses the full Fourier transform, but a value of 0.5 will low-pass filter</li><li><code>kwargs...</code> - additional keyword arguments will be passed to the <code>register</code> method (e.g., <code>upsample_factor</code>)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; cube = # load data ...

julia&gt; res = fourier_lucky_image(cube; dims=3, q=0.5, upsample_factor=10);</code></pre><p><strong>See also</strong></p><p><a href="#LuckyImaging.fourier_lucky_image!-Union{Tuple{T}, Tuple{AbstractMatrix, AbstractArray{T, 3}}} where T"><code>fourier_lucky_image!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaHCI/LuckyImaging.jl/blob/2f2393f3325450b60249f473ab80cc8e4f9ddab2/src/fourier.jl#L6-L40">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LuckyImaging.lucky_image-Union{Tuple{AbstractArray{T, 3}}, Tuple{T}} where T" href="#LuckyImaging.lucky_image-Union{Tuple{AbstractArray{T, 3}}, Tuple{T}} where T"><code>LuckyImaging.lucky_image</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">lucky_image(cube; dims, q, alg=:fourier, kwargs...)</code></pre><p>Perform lucky imaging along <code>dims</code> with the chosen algorithm. If <code>alg</code> is <code>:fourier</code> <a href="#LuckyImaging.fourier_lucky_image-Union{Tuple{AbstractArray{T, 3}}, Tuple{T}} where T"><code>fourier_lucky_image</code></a> will be used, otherwise if it is <code>:classic</code> <a href="#LuckyImaging.classic_lucky_image-Union{Tuple{AbstractArray{T}}, Tuple{T}} where T"><code>classic_lucky_image</code></a> will be used. The keyword arguments for those methods can be passed directly through this method. <code>q</code> is the selection quantile; in other words, it is one minus the selection fraction.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; cube = # load data

julia&gt; image = lucky_image(cube; dims=3, q=0.9, alg=:classic, upsample_factor=10);

julia&gt; imagef = lucky_image(cube; dims=3, q=0.5, alg=:fourier, upsample_factor=10);</code></pre><p><strong>See also</strong></p><p><a href="#LuckyImaging.classic_lucky_image-Union{Tuple{AbstractArray{T}}, Tuple{T}} where T"><code>classic_lucky_image</code></a>, <a href="#LuckyImaging.fourier_lucky_image-Union{Tuple{AbstractArray{T, 3}}, Tuple{T}} where T"><code>fourier_lucky_image</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaHCI/LuckyImaging.jl/blob/2f2393f3325450b60249f473ab80cc8e4f9ddab2/src/LuckyImaging.jl#L13-L30">source</a></section></article><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>Vincent Garrel et al 2012 <a href="https://iopscience.iop.org/article/10.1086/667399">&quot;A Highly Efficient Lucky Imaging Algorithm: Image Synthesis Based on Fourier Amplitude Selection&quot;</a> PASP 124 861</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Saturday 25 December 2021 05:13">Saturday 25 December 2021</span>. Using Julia version 1.7.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
